# -*- coding: utf8 -*-
import datetime
from lunarcalendar import Lunar
import ephem
import schedule
import datetime
import time
import nextmoon
import telebot
import redis

token = 'token'


bot = telebot.TeleBot(token)

redis_host = "xxx.xx.xx.xx"
redis_port = 6379
redis_password = "password"

r = redis.StrictRedis(host=redis_host, port=redis_port, password=redis_password, decode_responses=True)

monthdict = {'01': '—è–Ω–≤–∞—Ä—è',
             '02': '—Ñ–µ–≤—Ä–∞–ª—è',
             '03': '–º–∞—Ä—Ç–∞',
             '04': '–∞–ø—Ä–µ–ª—è',
             '05': '–º–∞—è',
             '06': '–∏—é–Ω—è',
             '07': '–∏—é–ª—è',
             '08': '–∞–≤–≥—É—Å—Ç–∞',
             '09': '—Å–µ–Ω—Ç—è–±—Ä—è',
             '10': '–æ–∫—Ç—è–±—Ä—è',
             '11': '–Ω–æ—è–±—Ä—è',
             '12': '–¥–µ–∫–∞–±—Ä—è', }


def is_holiday(todaynow, lunardate):
    f, s, t = get_three_dates(todaynow)
    print(f)
    print(s)
    print(t)
    print(todaynow)
    if f == lunardate or s == lunardate or t == lunardate:
        return True
    else:
        return False


def get_three_dates(date):
    firstDate = date - datetime.timedelta(days=1)
    secondDate = date  # - datetime.timedelta(days=0)
    thirdDate = date + datetime.timedelta(days=1)

    return firstDate.date(), secondDate.date(), thirdDate.date()


def img_sendann_tosubscr(messagetext, imgdest, mes2):
    db_keys = r.keys(pattern="*")
    for id in db_keys:
        try:
            with open(imgdest, 'rb') as bphoto:
                bot.send_photo(id, bphoto, messagetext)
            bot.send_message(id, mes2)
        except:
            pass
        time.sleep(0.05)


def job_annvesak():
    moontype, date = nextmoon.getnextupinfo()

    todaynow = datetime.datetime.utcnow() + datetime.timedelta(hours=3) #- datetime.timedelta(days=1)
    #nextday = todaynow + datetime.timedelta(days=1)
    myYear = todaynow.year
    vesakday = Lunar(myYear, 4, 15).to_date()
    mpujaday = Lunar(myYear, 1, 15).to_date()
    apujaday = Lunar(myYear, 6, 15).to_date()


    newdate = date
    if (todaynow.date() == newdate.date() and is_holiday(todaynow, vesakday)):
        # sendann_tosubscr(mes)

        print("–í–µ—Å–∞–∫")
        imgdest = "imgs/vesak.jpg"
        mes = "–î—Ä—É–∑—å—è, –ø–æ–∑–¥—Ä–∞–≤–ª—è—é –≤–∞—Å —Å –í–µ—Å–∞–∫–æ–º, –î–Ω—ë–º –ë—É–¥–¥—ã! üôè"
        mes2 = f"–í —ç—Ç–æ—Ç —Ä–∞–∑ –º—ã –æ—Ç–º–µ—á–∞–µ–º –µ–≥–æ {todaynow.day} {monthdict[todaynow.strftime('%m')]}\n\n" \
        "–ò–º–µ–Ω–Ω–æ –≤ –¥–µ–Ω—å –í–µ—Å–∞–∫ –¥–≤–∞ —Å –ø–æ–ª–æ–≤–∏–Ω–æ–π —Ç—ã—Å—è—á–µ–ª–µ—Ç–∏—è —Ç–æ–º—É –Ω–∞–∑–∞–¥ –≤ 623 –≥–æ–¥—É –¥–æ –Ω–∞—à–µ–π —ç—Ä—ã —Ä–æ–¥–∏–ª—Å—è –ë—É–¥–¥–∞. –¢–∞–∫–∂–µ –≤ —ç—Ç–æ—Ç –∂–µ –¥–µ–Ω—å –ë—É–¥–¥–∞ –¥–æ—Å—Ç–∏–≥ –ø—Ä–æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è –∏ –≤ —ç—Ç–æ—Ç –∂–µ –¥–µ–Ω—å –ë—É–¥–¥–∞ –ø–æ–∫–∏–Ω—É–ª —ç—Ç–æ—Ç –º–∏—Ä –Ω–∞ 80-–º –≥–æ–¥—É –∂–∏–∑–Ω–∏." \
               "\n–í —ç—Ç–æ—Ç –¥–µ–Ω—å –≤–æ –≤—Å–µ—Ö –±—É–¥–¥–∏–π—Å–∫–∏—Ö –º–æ–Ω–∞—Å—Ç—ã—Ä—è—Ö –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è —Ç–æ—Ä–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–æ–ª–µ–±–Ω—ã, –º–µ—Å—Ç–Ω—ã–µ –±—É–¥–¥–∏–π—Å–∫–∏–µ —Ö—Ä–∞–º—ã —É–∫—Ä–∞—à–∞—é—Ç—Å—è –≥–∏—Ä–ª—è–Ω–¥–∞–º–∏ –∏–∑ —Ü–≤–µ—Ç–æ–≤, –∞ —Å –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–µ–º —Ç–µ–º–Ω–æ—Ç—ã –∑–∞–∂–∏–≥–∞—é—Ç—Å—è —Ä–∞–∑–Ω–æ—Ü–≤–µ—Ç–Ω—ã–µ —Ñ–æ–Ω–∞—Ä–∏–∫–∏, —á—Ç–æ —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ—Å–≤–µ—Ç–ª–µ–Ω–∏–µ, –ø—Ä–∏—Ö–æ–¥—è—â–µ–µ –≤ —ç—Ç–æ—Ç –º–∏—Ä. –§–æ–Ω–∞—Ä–∏–∫–∏ –¥–ª—è –í–µ—Å–∞–∫–∞ –¥–µ–ª–∞—é—Ç—Å—è –∏–∑ –±—É–º–∞–≥–∏ –Ω–∞ –ª—ë–≥–∫–æ–º –¥–µ—Ä–µ–≤—è–Ω–Ω–æ–º –∫–∞—Ä–∫–∞—Å–µ. –ù–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ —Ö—Ä–∞–º–æ–≤ –≤–æ–∫—Ä—É–≥ –¥–µ—Ä–µ–≤—å–µ–≤ –ë–æ–¥—Ö–∏ –∏ —Å—Ç—É–ø –ø—Ä–∏–Ω—è—Ç–æ —Ä–∞—Å—Å—Ç–∞–≤–ª—è—Ç—å –º–∞—Å–ª—è–Ω—ã–µ –ª–∞–º–ø—ã. " \
               "–õ—é–¥–∏ –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∞—Ö –ø–æ—Å—ã–ª–∞—é—Ç —Å–≤–æ–∏–º –±–ª–∏–∑–∫–∏–º –∏ –¥—Ä—É–∑—å—è–º –ø–æ–∑–¥—Ä–∞–≤–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç–∫—Ä—ã—Ç–∫–∏, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –∏–∑–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–∞–º—è—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏–∑ –∂–∏–∑–Ω–∏ –ë—É–¥–¥—ã. " \
               "–ú–∏—Ä—è–Ω–µ —Ç–∞–∫–∂–µ –ø–æ—Å–µ—â–∞—é—Ç –º–µ—Å—Ç–Ω—ã–µ —Ö—Ä–∞–º—ã –∏ –º–æ–Ω–∞—Å—Ç—ã—Ä–∏, —Å–ª—É—à–∞—é—Ç –¥–∞—Ä—à–∞–Ω—ã (–±—É–∫–≤. ¬´–≤–∏–¥–µ–Ω—å–µ¬ª, ¬´–≤—Å—Ç—Ä–µ—á–∞¬ª, —ç–ª–µ–º–µ–Ω—Ç –ø—É–¥–∂–∏) –∏ –º–µ–¥–∏—Ç–∏—Ä—É—é—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –≤—Å–µ–π –Ω–æ—á–∏." \
               "–í –¥–Ω–∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞ —Ç–∞–∫–∂–µ –ø–æ–æ—â—Ä—è–µ—Ç—Å—è –¥–∞–Ω–∞ (–ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è) –∫–∞–∫ —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ –º–∏–ª–æ—Å–µ—Ä–¥–∏—è. –ú–∏—Ä—è–Ω–µ, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –ø—Ä–∏–Ω–æ—Å—è—Ç –≤ –º–æ–Ω–∞—Å—Ç—ã—Ä—å –∏–ª–∏ —Ö—Ä–∞–º –æ–±–∏–ª—å–Ω–æ–µ —É–≥–æ—â–µ–Ω–∏–µ (–ø–∏—â—É) –≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ –æ–Ω–∏ –Ω–µ –∑–∞–±—ã–≤–∞—é—Ç –æ —Å–≤–æ—ë–º –¥–æ–ª–≥–µ –ø–µ—Ä–µ–¥ –º–æ–Ω–∞—Å—Ç—ã—Ä—Å–∫–æ–π –æ–±—â–∏–Ω–æ–π (—Å–∞–Ω–≥—Ö–æ–π). –ü–æ–¥–Ω–æ—à–µ–Ω–∏—è –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞—é—Ç, —á—Ç–æ —Å–∞–Ω–≥—Ö–∞ –≤–∞–∂–Ω–∞ –¥–ª—è –º–∏—Ä—è–Ω. " \
               "–í —ç—Ç–æ—Ç –¥–µ–Ω—å –º–Ω–æ–≥–∏–µ –≤—Å–ø–æ–º–∏–Ω–∞—é—Ç –ø–µ—Ä–≤—ã–µ –ø—Ä–æ–ø–æ–≤–µ–¥–∏ –ë—É–¥–¥—ã, —Ç–∞–∫–∏–µ –∫–∞–∫: \n 4 –±–ª–∞–≥–æ—Ä–æ–¥–Ω—ã–µ –∏—Å—Ç–∏–Ω—ã \n(https://suttacentral.net/sn56.11/ru/sv), \n –¥–æ–∫—Ä—Ç–∏–Ω–∞ ¬´–Ω–µ-—è¬ª \n(https://suttacentral.net/sn22.59/ru/sv),\n 4 —Å–≤–æ–¥–∫–∏ –î—Ö–∞–º–º—ã \n(https://suttacentral.net/mn82/ru/sv) \n... –∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ –ù–∞—Å—Ç–∞–≤–ª–µ–Ω–∏—è "

        img_sendann_tosubscr(mes, imgdest, mes2)

    if (todaynow.date() == newdate.date() and is_holiday(todaynow, mpujaday)):
        # sendann_tosubscr(mes)
        print("Magha Puja")
        mes = "–î—Ä—É–∑—å—è, –ø–æ–∑–¥—Ä–∞–≤–ª—è—é –≤–∞—Å —Å –ú–∞–∫—Ö–∞ –ü—É–¥–∂–µ–π, –î–Ω—ë–º –°–∞–Ω–≥—Ö–∏!"
        mes2 = f"–í —ç—Ç–æ—Ç —Ä–∞–∑ –º—ã –æ—Ç–º–µ—á–∞–µ–º –µ–≥–æ {todaynow.day} {monthdict[todaynow.strftime('%m')]}\n\n" \
               f"–ú–∞–∫—Ö–∞ –ü—É–¥–∂–∞ - –æ–¥–∏–Ω –∏–∑ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å–Ω—ã—Ö –±—É–¥–¥–∏–π—Å–∫–∏—Ö –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤. –û–Ω –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –¥–µ–Ω—å –ø–æ–ª–Ω–æ–ª—É–Ω–∏—è —Ç—Ä–µ—Ç—å–µ–≥–æ –ª—É–Ω–Ω–æ–≥–æ –º–µ—Å—è—Ü–∞ (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ –ø–æ—Å–ª–µ–¥–Ω—è—è –Ω–µ–¥–µ–ª—è —Ñ–µ–≤—Ä–∞–ª—è, –Ω–∞—á–∞–ª–æ –º–∞—Ä—Ç–∞). –≠—Ç–æ—Ç –¥–µ–Ω—å —Å–≤—è–∑–∞–Ω —Å —á–µ—Ç—ã—Ä—å–º—è –≤–∞–∂–Ω—ã–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–∏–∑–æ—à–ª–∏ –≤ –∂–∏–∑–Ω–∏ –ë—É–¥–¥—ã, –∞ –∏–º–µ–Ω–Ω–æ: \n " \
               f"\n1250 –±—É–¥–¥–∏–π—Å–∫–∏—Ö –º–æ–Ω–∞—Ö–æ–≤ —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ —Å–æ–±—Ä–∞–ª–∏—Å—å –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–µ—Å—Ç, —á—Ç–æ–±—ã –ø–æ—á—Ç–∏—Ç—å –ë—É–¥–¥—É –≤ –ë–∞–º–±—É–∫–æ–≤–æ–π –†–æ—â–µ –≤ –†–∞–¥–∂–≥–∞—Ö–µ, –°–µ–≤–µ—Ä–Ω–∞—è –ò–Ω–¥–∏—è, –≥–¥–µ —Ç–æ–≥–¥–∞ –æ–Ω –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è.\n" \
               f"\n–í—Å–µ –æ–Ω–∏ –±—ã–ª–∏ –ê—Ä—Ö–∞—Ç–∞–º–∏ –∏ –±—ã–ª–∏ –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ –º–æ–Ω–∞—Ö–∏ –ª–∏—á–Ω–æ –ë—É–¥–¥–æ–π . –û–Ω–∏ —Å–æ–±—Ä–∞–ª–∏—Å—å –≤–º–µ—Å—Ç–µ –≤ –¥–µ–Ω—å –ø–æ–ª–Ω–æ–π –ª—É–Ω—ã –Ω–∞ —Ç—Ä–µ—Ç–∏–π –ª—É–Ω–Ω—ã–π –º–µ—Å—è—Ü. –í–µ—á–µ—Ä–æ–º —Ç–æ–≥–æ –∂–µ –¥–Ω—è –ë—É–¥–¥–∞ –ø—Ä–æ—á–∏—Ç–∞–ª –∏–º –ø—Ä–æ–ø–æ–≤–µ–¥—å \"–û–≤–∞–¥–∞ –ø–∞—Ç–∏–º–æ–∫–∞\", –≤–æ –≤—Ä–µ–º—è –∫–æ—Ç–æ—Ä–æ–π –≤—ã–¥–≤–∏–Ω—É–ª –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Å–≤–æ–µ–≥–æ —É—á–µ–Ω–∏—è –∏, –≤ –∏—Ç–æ–≥–µ, –ø—Ä–∏—à–µ–ª –∫ —Ç—Ä–µ–º –∏—Å—Ç–∏–Ω–∞–º: –¥–µ–ª–∞–π –¥–æ–±—Ä–æ, –≤–æ–∑–¥–µ—Ä–∂–∏–≤–∞–π—Å—è –æ—Ç –∑–ª–∞ –∏ –æ—á–∏—â–∞–π —Å–≤–æ–π —Ä–∞–∑—É–º.\n" \
               f"\n–¶–µ—Ä–µ–º–æ–Ω–∏—è –ø—Ä–∞–∑–¥–Ω–æ–≤–∞–Ω–∏—è –≤ –±—É–¥–¥–∏–π—Å–∫–∏—Ö –º–æ–Ω–∞—Å—Ç—ã—Ä—è—Ö:\n" \
               f"\n–¶–µ—Ä–µ–º–æ–Ω–∏—è –ø–µ—Å–Ω–æ–ø–µ–Ω–∏—è, –º–µ–¥–∏—Ç–∞—Ü–∏—è, —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è –æ –î—Ö–∞–º–º–µ\n" \
               f"\n–ö—É–ª—å–º–∏–Ω–∞—Ü–∏—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∞ ‚Äì —Å–≤–µ—á–Ω–∞—è –ø—Ä–æ—Ü–µ—Å—Å–∏—è ‚Äì –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –≤–µ—á–µ—Ä–Ω–µ-–Ω–æ—á–Ω–æ–µ –≤—Ä–µ–º—è, –æ–±—ã—á–Ω–æ –ø–æ—Å–ª–µ 8 —á–∞—Å–æ–≤. –í—Å–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤–æ–∑–ª–µ —Ö—Ä–∞–º–∞, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫—Ä–∞—à–µ–Ω–Ω–æ–≥–æ –ø–æ —ç—Ç–æ–º—É —Å–ª—É—á–∞—é –∏ –æ–±—Ö–æ–¥—è—Ç –≤–æ–∫—Ä—É–≥ —Ö—Ä–∞–º–∞ —Ç—Ä–∏ —Ä–∞–∑–∞ –ø–æ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–µ, –Ω–µ—Å—è –≤ —Ä—É–∫–∞—Ö —Å–≤–µ—á–∏, –±–ª–∞–≥–æ–≤–æ–Ω–Ω—ã–µ –ø–∞–ª–æ—á–∫–∏ –∏ —Ü–≤–µ—Ç—ã –ª–æ—Ç–æ—Å–∞. " \
               f"\n–ö–∞–∂–¥–æ–µ –∏–∑ —Ç—Ä–µ—Ö —à–µ—Å—Ç–≤–∏–π –∏–º–µ–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Å–º—ã—Å–ª: –ø–µ—Ä–≤–æ–µ —Å–æ–≤–µ—Ä—à–∞–µ—Ç—Å—è –≤ —á–µ—Å—Ç—å —Å–∞–º–æ–≥–æ –ë—É–¥–¥—ã, –≤—Ç–æ—Ä–æ–µ ‚Äì –≤ —á–µ—Å—Ç—å –≤—Å–µ–≥–æ –±—É–¥–¥–∏–π—Å–∫–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞, –°–∞–Ω–≥—Ö–∏, –∞ —Ç—Ä–µ—Ç—å–µ ‚Äì –≤ —á–µ—Å—Ç—å –µ–≥–æ —É—á–µ–Ω–∏—è –î—Ö–∞–º–º—ã."
        imgdest = "imgs/magha.jpg"
        img_sendann_tosubscr(mes, imgdest, mes2)

    if (todaynow.date() == newdate.date() and is_holiday(todaynow, apujaday)):
        # sendann_tosubscr(mes)
        print("Asalha Puja")
        mes = "–î—Ä—É–∑—å—è, –ø–æ–∑–¥—Ä–∞–≤–ª—è—é –≤–∞—Å —Å –ê—Å–∞–ª—Ö–∞ –ü—É–¥–∂–µ–π, –î–Ω—ë–º –î—Ö–∞–º–º—ã!"
        mes2 = f"–í —ç—Ç–æ—Ç —Ä–∞–∑ –º—ã –æ—Ç–º–µ—á–∞–µ–º –µ–≥–æ {todaynow.day} {monthdict[todaynow.strftime('%m')]}\n\n" \
        "–ë—É–¥–¥–∞ –≥–æ–≤–æ—Ä–∏–ª –æ —Ç—Ä–µ—Ö —á—É–¥–µ—Å–∞—Ö: —á—É–¥–æ —Å–≤–µ—Ä—Ö—ä–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–∏–ª, —á—É–¥–æ —á—Ç–µ–Ω–∏—è –º—ã—Å–ª–µ–π –∏ —á—É–¥–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –æ–±—É—á–∞—Ç—å. –ë—É–¥–¥–∞ —Å–∫–∞–∑–∞–ª, —á—Ç–æ –æ–Ω –≤–∏–¥–µ–ª –æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ –ø–µ—Ä–≤—ã—Ö –¥–≤—É—Ö, –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å—á–∏—Ç–∞–ª –±–ª–∞–≥–æ—Ä–æ–¥–Ω—ã–º –∏ –≤–æ–∑–≤—ã—à–µ–Ω–Ω—ã–º. –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ä–∞–∑—ä—è—Å–Ω–∏—Ç—å –ø—É—Ç—å –∫ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–º—É –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—é - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å—Ç–æ—è—â–µ–µ —á—É–¥–æ. " \
               "\n–°–µ–≥–æ–¥–Ω—è –º—ã –æ—Ç–º–µ—á–∞–µ–º –ê—Å–∞–ª—Ö–∞ –ü—É–¥–∂—É, –¥–µ–Ω—å, –∫–æ–≥–¥–∞ –ë—É–¥–¥–∞ –∑–∞–ø—É—Å—Ç–∏–ª –∫–æ–ª–µ—Å–æ –î—Ö–∞–º–º—ã, –ø—Ä–æ–≤–æ–∑–≥–ª–∞—Å–∏–≤ 4 –ë–ª–∞–≥–æ—Ä–æ–¥–Ω—ã–µ –ò—Å—Ç–∏–Ω—ã. –ò–º–µ–Ω–Ω–æ —Ç–æ–≥–¥–∞ –ë—É–¥–¥–∞ –≤–ø–µ—Ä–≤—ã–µ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–≤ —á—É–¥–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –æ–±—É—á–∞—Ç—å. –ß–µ—Ä–µ–∑ –¥–≤–∞ –º–µ—Å—è—Ü–∞ –ø–æ—Å–ª–µ —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è –æ–Ω –ø—Ä–∏–±—ã–ª –≤ –û–ª–µ–Ω–∏–π –ü–∞—Ä–∫ –≤ –°–∞—Ä–Ω–∞—Ç—Ö–µ, –Ω–µ–¥–∞–ª–µ–∫–æ –æ—Ç –ë–µ–Ω–∞—Ä–µ—Å–∞ (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –í–∞—Ä–∞–Ω–∞—Å–∏), —á—Ç–æ–±—ã —Ä–∞–∑—ä—è—Å–Ω–∏—Ç—å —É—á–µ–Ω–∏–µ —Å–≤–æ–∏–º –ø—è—Ç–∏ –±—ã–≤—à–∏–º –¥—Ä—É–∑—è–º –ø–æ –∞—Å–∫–µ–∑–µ. –°–Ω–∞—á–∞–ª–∞ —ç—Ç–∏ –∞—Å–∫–µ—Ç—ã –±—ã–ª–∏ –≤—Ä–∞–∂–¥–µ–±–Ω—ã –∫ –ë—É–¥–¥–µ –∏ –Ω–µ –¥–æ–≤–µ—Ä—è–ª–∏ –µ–º—É, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –¥—É–º–∞–ª–∏, —á—Ç–æ –æ–Ω –ø–æ—Ç–µ—Ä–ø–µ–ª –ø–æ—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø—Ä–∞–∫—Ç–∏–∫–µ. –ò—Ö –º—ã—Å–ª–∏ –±—ã–ª–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –æ—à–∏–±–æ—á–Ω—ã–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º –æ –¥—É—Ö–æ–≤–Ω–æ–º —Ä–∞–∑–≤–∏—Ç–∏–∏. –ù–æ —É–∂–µ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –ë—É–¥–¥–∞ —Å–º–æ–≥ —Å–º—è–≥—á–∏—Ç—å –∏—Ö –≤—Ä–∞–∂–¥–µ–±–Ω–æ—Å—Ç—å –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –µ–µ –≤ –≤–µ—Ä—É –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ. –û–Ω —Å–º–æ–≥ –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å –∏—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è. –£—á–µ–Ω–∏–µ –æ –°–µ—Ä–µ–¥–∏–Ω–Ω–æ–º –ü—É—Ç–∏ –±—ã–ª–æ –¥–∞–Ω–æ —Å —Ç–∞–∫–æ–π —Å–∏–ª–æ–π –∏ –∫—Ä–∞—Å–Ω–æ—Ä–µ—á–∏–µ–º, —á—Ç–æ –æ–Ω–∏ —Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å—é –ø—Ä–∏–Ω—è–ª–∏ –µ–≥–æ. –ö –∫–æ–Ω—Ü—É –±–µ—Å–µ–¥—ã, –ö–æ–Ω–¥–∞–Ω–Ω–∞ - —Å—Ç–∞—Ä–µ–π—à–∏–π –∏–∑ —á–ª–µ–Ω–æ–≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø—ã, –¥–æ—Å—Ç–∏–≥ –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è –ø—Ä–æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è, —Å—Ç–∞–≤ —Å–æ—Ç–∞–ø–∞–Ω–Ω–æ–π, \"–≤–æ—à–µ–¥—à–∏–º –≤ –ø–æ—Ç–æ–∫\", –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —á–µ—Ç—ã—Ä–µ —Å—Ç–∞–ª–∏ –Ω–∞ –ü—É—Ç—å.  https://suttacentral.net/sn56.11/ru/sv"
        imgdest = "imgs/asalha.jpg"
        img_sendann_tosubscr(mes, imgdest, mes2)


# myYear = 2021
# print(f"Vesak {myYear} = {Lunar(myYear, 4, 15).to_date()}")  # Vesak –∏ –ø–æ–ª–Ω–æ–ª—É–Ω–∏–µ
# print(f"Magha Puja {myYear} = {Lunar(myYear, 1, 15).to_date()}")  # Vesak –∏ –ø–æ–ª–Ω–æ–ª—É–Ω–∏–µ
# print(f"Asalha Puja {myYear} = {Lunar(myYear, 6, 15).to_date()}")  # Vesak –∏ –ø–æ–ª–Ω–æ–ª—É–Ω–∏–µ

# todaynow = datetime.datetime.utcnow() + datetime.timedelta(hours=3)
# print(type(Lunar(myYear, 4, 15).to_date()))
# print(type(todaynow.date()))
#
# print(todaynow.date())
# print(todaynow.year)
#
# print("---------")

print("Vesak Announcer")

schedule.every().day.at("07:05").do(job_annvesak)


while True:
    schedule.run_pending()
    time.sleep(30)
